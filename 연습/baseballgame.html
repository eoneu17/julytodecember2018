<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Baseball Game</title>
</head>

<body>
  <script>
    var list = [];
    for (var i = 0; i < 10; i++) {
      list[i] = i;
    }
    var num = [];
    for (var i = 0; i < 4; i++) {
      var select = Math.floor(Math.random() * list.length);
      num[i] = list.splice(select, 1)[0];
    }
    var count = 0;
    while (count < 10) {
      var input = prompt('서로 다른 숫자 4자리 입력! (ex.1234)');
      var inputArr = input.split('');
      var wrongInput, strike, ball;
      if (input == undefined) {
        console.log('게임 종료');
        alert('게임 종료');
        break;
      } else if (input.length !== 4) {
        wrongInput = true;
        count--;
      } else {
        wrongInput = false;
        strike = 0;
        ball = 0;
        count = 0;
        count++;
        var overlap;
        for (var j = 0; j < 4; j++) {
          for (var k = 0; k < 4; k++) {
            if (num[j] == inputArr[k]) {
              if (j === k) {
                strike++;
              } else {
                ball++;
              }
              break;
            }
          }
          for (var l = 0; l < 4; l++) {
            if (j !== l && inputArr[j] === inputArr[l]) {
              overlap = true;
              break;
            }
          }
        }
        if (overlap === true) {
          console.log('같은 숫자 여러번 입력함');
          alert('같은 숫자 여러번 입력함');
        }
      }
      if (strike === 4) {
        console.log('홈런! ' + (count) + '번 만에 맞춤!');
        alert('홈런! ' + (count) + '번 만에 맞춤!');
        break;
      } else if (count > 10) {
        console.error('시도 횟수 초과');
        alert('시도 횟수 초과');
      } else if (wrongInput === true) {
        console.log('4자리 숫자만 입력해');
        alert('4자리 숫자만 입력해');
      } else {
        console.info(count + '번째 시도\n' + inputArr.join('') + ': ' + strike + '스트라이크' + ball + '볼');
        alert(count + '번째 시도\n' + inputArr.join('') + ': ' + strike + '스트라이크' + ball + '볼');
      }
    }
  </script>
</body>

</html>
