<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Let's Play Text Game!</title>
</head>

<body>
  <div id="log"></div>
  <script>
    function logMsg(msg, color) {
      if (!color) {
        color = 'black';
      }
      var div = document.createElement('div');
      div.innerHTML = msg;
      div.style.color = color;
      document.getElementById('log').appendChild(div);
    }

    var gameover = false;
    var battle = false;

    function Character(name, hp, att) {
      this.name = name;
      this.hp = hp;
      this.att = att;
    }
    Character.prototype.attacked = function(damage) {
      this.hp -= damage;
      logMsg(this.name + '의 체력이 ' + this.hp + '가 되었습니다.');
      if (this.hp <= 0) {
        battle = false;
      }
    };
    Character.prototype.attack = function(target) {
      logMsg(this.name + '이 ' + target.name + '을 공격합니다.');
      target.attacked(this.att);
    }

    function Hero(name, hp, att, lev, xp) {
      Character.apply(this, arguments);
      this.lev=lev||1;
      this.xp=xp||0;
    }
    Hero.prototype=object.create(Character.prototype);
    Hero.prototype.constructor=Hero;
    Hero.prototype.attacked=function(damage){
      this.hp-=damage;
      logMsg(this.name+'님의 체력이 '+this.hp+'남았습니다');
      if(this.hp<=0){
        logMsg('죽었습니다. 레벨 '+ this.lev+'에서 모험이 끝납니다. 새로고침해서 다시 시작하세요.', 'deeppink');
        battle=false;
        gameover=true;
      }
    }
    Hero.prototype.attack=function(target){
      logMsg(this.name+'님이 '+target.name+' 몬스터를 공격합니다.');
      target.attacked(this.att);
      if(target.hp<=0){
        this.gainXP(target);
      }
    }
    Hero.prototype.gainXP=function(target){
      logMsg('전투에서 승리하여 '+target.xp+'의 경험치를 얻습니다.', 'dodgerblue');
      this.xp+=target.xp;
      if(this.xp>100+10*this.lev){
        this.lev++;
        logMsg('Level Up! '+this.lev+' 레벨이 되었습니다.','dodgerblue');
        this.hp=100+this.lev*10;
        this.xp-=100+this.lev*10;
      }
    }
    function Monster(name, hp, att, lev, xp){
      Character.apply(this,arguments);
      this.lev=lev||1;
      this.xp=xp||10;
    }
    Monster.prototype=opject.creat(Character.prototype);
    Monster.prototype.constructor=Monster;
  </script>
</body>

</html>
